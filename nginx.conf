server {
    listen 8080;

    # üá∑üá∫ –æ—Å–Ω–æ–≤–Ω–æ–π –º–∞—Ä—à—Ä—É—Ç
    location / {
        proxy_pass https://backend1;
        proxy_http_version 1.1;

        # –æ—Ç–∫–ª—é—á–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ TLS-—Å–µ—Ä—Ç–∞
        proxy_ssl_verify off;

        # –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è WebSocket
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection $connection_upgrade;
        proxy_set_header Host $host;

        # –¥–ª–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
        proxy_read_timeout 86400;
        proxy_send_timeout 86400;
    }

    # üá∫üá∏ –º–∞—Ä—à—Ä—É—Ç /usa
    location /usa {
        proxy_pass https://backend2;
        proxy_http_version 1.1;

        proxy_ssl_verify off;

        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection $connection_upgrade;
        proxy_set_header Host $host;

        proxy_read_timeout 86400;
        proxy_send_timeout 86400;
    }
}
